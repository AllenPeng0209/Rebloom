import * as Localization from 'expo-localization';
import { I18n } from 'i18n-js';

import en from './translations/en.json';
import ja from './translations/ja.json';
import zhCN from './translations/zh-CN.json';
import zhTW from './translations/zh-TW.json';

const i18n = new I18n({
  en,
  ja,
  'zh-CN': zhCN,
  'zh-TW': zhTW,
});

// 语言映射函数
const getDeviceLocale = () => {
  const locales = Localization.getLocales();
  const primaryLocale = locales[0];
  
  // 优先使用完整的区域设置
  if (primaryLocale.languageTag) {
    const languageTag = primaryLocale.languageTag;
    
    // 直接匹配我们支持的语言
    if (languageTag === 'zh-CN' || languageTag === 'zh-Hans-CN') return 'zh-CN';
    if (languageTag === 'zh-TW' || languageTag === 'zh-Hant-TW') return 'zh-TW';
    if (languageTag === 'ja' || languageTag === 'ja-JP') return 'ja';
    if (languageTag === 'en' || languageTag.startsWith('en-')) return 'en';
  }
  
  // 回退到基础语言代码
  const languageCode = primaryLocale.languageCode;
  if (languageCode === 'zh') {
    // 根据地区代码判断简繁体
    if (primaryLocale.regionCode === 'TW' || primaryLocale.regionCode === 'HK') {
      return 'zh-TW';
    }
    return 'zh-CN';
  }
  if (languageCode === 'ja') return 'ja';
  if (languageCode === 'en') return 'en';
  
  // 默认返回英文
  return 'en';
};

i18n.defaultLocale = 'en';
i18n.locale = getDeviceLocale();
i18n.enableFallback = true;

type TranslationKeys =
  | 'home.all'
  | 'home.calendar'
  | 'home.expense'
  | 'home.idea'
  | 'home.mood'
  | 'home.assistant'
  | 'home.chores'
  | 'home.health'
  | 'home.activities'
  | 'home.album'
  | 'home.shopping'
  | 'home.finance'
  | 'home.recipes'
  | 'home.calendarPermissionTitle'
  | 'home.calendarPermissionMessage'
  | 'home.notNow'
  | 'home.grantPermission'
  | 'home.success'
  | 'home.permissionGranted'
  | 'home.processVoiceTitle'
  | 'home.processVoiceMessage'
  | 'home.cancel'
  | 'home.convert'
  | 'home.error'
  | 'home.mustBeLoggedIn'
  | 'home.savingExpenses'
  | 'home.saveSuccess'
  | 'home.saveExpensesSuccess'
  | 'home.saveFailed'
  | 'home.saveExpensesFailed'
  | 'home.processingImage'
  | 'home.processingVoice'
  | 'home.addToCalendar'
  | 'home.addMultipleToCalendar'
  | 'home.multipleEventsFound'
  | 'home.addAsSingleEvent'
  | 'home.addAsMultipleEvents'
  | 'home.confirm'
  | 'home.imageTooLarge'
  | 'home.imageSizeError'
  | 'home.imageProcessingError'
  | 'home.voiceProcessingError'
  | 'home.textProcessingError'
  | 'home.addOneByOne'
  | 'home.addAll'
  | 'home.multipleExpensesFound'
  | 'home.savingEvents'
  | 'home.saveEventsSuccess'
  | 'home.saveEventsFailed'
  | 'home.deleteConfirmation'
  | 'home.deleteEventConfirmation'
  | 'home.deleteRecurringEventTitle'
  | 'home.deleteRecurringEventMessage'
  | 'home.deleteInstance'
  | 'home.deleteAllFuture'
  | 'home.familyCalendar'
  | 'home.recordFamilyTime'
  | 'home.connectedToSystemCalendar'
  | 'home.today'
  | 'home.noEventsToday'
  | 'home.manualAddPrompt'
  | 'home.smartReminder'
  | 'home.longPressToTalk'
  | 'home.photo'
  | 'home.album'
  | 'home.processImageToCalendarTitle'
  | 'home.processImageToCalendarMessage'
  | 'home.processImageToExpenseTitle'
  | 'home.processImageToExpenseMessage'
  | 'home.todayEvents'
  | 'home.add'
  | 'home.manual'
  | 'home.record'
  | 'home.recordingFailed'
  | 'home.micPermissionError'
  | 'home.permissionDenied'
  | 'home.permissionRequired'
  | 'home.camera'
  | 'home.photoLibrary'
  | 'home.imageProcessingFailed'
  | 'home.unknownError'
  | 'home.voiceProcessingFailed'
  | 'home.expenseVoiceProcessingFailed'
  | 'home.textProcessingFailedWithReason'
  | 'home.parsingFailed'
  | 'home.noValidInfo'
  | 'home.userNotLoggedIn'
  | 'home.parsingSuccess'
  | 'home.expenseParsingSuccessMessage'
  | 'home.income'
  | 'home.expenseType'
  | 'home.notes'
  | 'home.confirmSave'
  | 'home.multipleExpensesParsed'
  | 'home.saveAll'
  | 'home.eventParsingSuccessMessage'
  | 'home.location'
  | 'home.create'
  | 'home.multipleEventsParsed'
  | 'home.createAll'
  | 'home.invalidTimeFormat'
  | 'home.timeSequenceError'
  | 'home.recurringEventCreationSuccess'
  | 'home.recurringEventCreationSuccessMessage'
  | 'home.ok'
  | 'home.recurringEventCreationFailed'
  | 'home.recurringRuleError'
  | 'home.recurringRuleFrequencyMissing'
  | 'home.recurringPatternRecognitionFailed'
  | 'home.continue'
  | 'home.eventCreationSuccess'
  | 'home.eventCreationSuccessMessage'
  | 'home.eventCreationFailed'
  | 'home.eventUpdateSuccess'
  | 'home.eventUpdateFailed'
  | 'home.noEventThisDay'
  | 'home.addEventPrompt'
  | 'home.addEvent'
  | 'home.loadingData'
  | 'home.recordTab'
  | 'home.exploreTab'
  | 'home.recentExpenses'
  | 'home.kidsSchedule'
  | 'home.choreSchedule'
  | 'home.anniversaryReminder'
  | 'home.isRecording'
  | 'home.eventDeleted'
  | 'home.confirmationTitleSingle'
  | 'home.confirmationTitleMultiple'
  | 'home.eventCreatedSuccess'
  | 'home.multipleEventsCreationSuccessMessage'
  | 'home.eventUpdatedSuccess'
  | 'home.eventDeleteSuccess'
  | 'home.analyzingText'
  | 'home.expenseSaveNotLoggedIn'
  | 'home.userStateError'
  | 'home.expenseSaveFailed'
  | 'home.expenseSaved'
  // 新增的錯誤消息和通用 key
  | 'errors.userNotLoggedIn'
  | 'errors.invalidFamilyId'
  | 'errors.userIdRequired'
  | 'errors.invalidUserId'
  | 'errors.eventNotFound'
  | 'errors.eventNotAccessible'
  | 'errors.updateFailed'
  | 'errors.noDataReturned'
  | 'errors.cannotSetPrivate'
  | 'errors.cameraPermissionRequired'
  | 'errors.photoLibraryPermissionRequired'
  | 'errors.userNotLoggedInUpload'
  | 'errors.familyRequired'
  | 'errors.uploadFailedNoPath'
  | 'errors.downloadFailed'
  | 'errors.insufficientPoints'
  | 'errors.targetNotFound'
  | 'errors.noPhotosForVideo'
  | 'errors.configurationError'
  | 'errors.recordingFileInvalid'
  | 'errors.recordingFileEmpty'
  | 'errors.sendMessageFailed'
  | 'errors.getChatHistoryFailed'
  | 'errors.deleteMessageFailed'
  | 'errors.clearChatFailed'
  | 'errors.saveConversationFailed'
  | 'errors.getConversationsFailed'
  | 'errors.createNotificationFailed'
  | 'errors.batchCreateNotificationFailed'
  | 'errors.getNotificationsFailed'
  | 'errors.markNotificationReadFailed'
  | 'errors.batchMarkNotificationReadFailed'
  | 'errors.getUnreadCountFailed'
  | 'errors.getNotificationPreferencesFailed'
  | 'errors.updateNotificationPreferencesFailed'
  | 'calendar.jan'
  | 'calendar.feb'
  | 'calendar.mar'
  | 'calendar.apr'
  | 'calendar.may'
  | 'calendar.jun'
  | 'calendar.jul'
  | 'calendar.aug'
  | 'calendar.sep'
  | 'calendar.oct'
  | 'calendar.nov'
  | 'calendar.dec'
  | 'calendar.noEvents'
  | 'calendar.addNewEvent'
  | 'todos.today'
  | 'todos.tomorrow'
  | 'todos.overdue'
  | 'todos.high'
  | 'todos.medium'
  | 'todos.low'
  | 'todos.all'
  | 'todos.pending'
  | 'todos.completed'
  | 'todos.noTodos'
  | 'todos.noCompletedTodos'
  | 'todos.createFirstTodo'
  | 'todos.addTodo'
  | 'todos.editTodo'
  | 'todos.todoTitlePlaceholder'
  | 'todos.descriptionPlaceholder'
  | 'todos.priority'
  | 'todos.dueDatePlaceholder'
  | 'todos.save'
  | 'todos.cancel'
  | 'todos.delete'
  | 'todos.confirmDelete'
  | 'todos.confirmDeleteMessage'
  | 'todos.error'
  | 'todos.pleaseEnterTodoTitle'
  | 'todos.loadFailed'
  | 'todos.createFailed'
  | 'todos.updateFailed'
  | 'todos.deleteFailed'
  | 'todos.updateStatusFailed'
  | 'todos.pleaseJoinFamily'
  | 'voice.longPressSmartSelect'
  | 'voice.pressSpeakQuickCreate'
  | 'common.unknownUser'
  | 'common.unknownFamily'
  | 'common.loadingChoresFailed'
  | 'common.loadingTemplatesFailed'
  | 'common.loadingStatsFailed'
  | 'common.createChoreFailed'
  | 'common.updateChoreFailed'
  | 'common.completeChoreFailed'
  | 'common.deleteChoreFailed'
  | 'common.getFamiliesFailed'
  | 'common.createFamilyFailed'
  | 'common.checkMembershipFailed'
  | 'common.removeMemberFailed'
  | 'common.leaveFamilyFailed'
  | 'common.dissolveFamilyFailed'
  | 'common.updateFamilyNameFailed'
  | 'common.emailInviteInDevelopment'
  | 'common.emailInviteFailed'
  | 'common.cannotFindParentEvent'
  | 'common.voiceRecognitionEmpty'
  | 'common.noValidPhotos'
  | 'common.loadingEventsFailed'
  | 'space.cannotShareToMetaSpace'
  | 'errors.sendMessageFailed'
  | 'errors.getChatHistoryFailed'
  | 'errors.getConversationsFailed'
  | 'errors.deleteMessageFailed'
  | 'errors.clearChatFailed'
  | 'calendarStyleSelector.title'
  | 'calendarStyleSelector.subtitle'
  | 'calendarStyleSelector.styles.gridMonth'
  | 'calendarStyleSelector.styles.weeklyGrid'
  | 'calendarStyleSelector.styles.cardMonth'
  | 'calendarStyleSelector.styles.agendaList'
  | 'calendarStyleSelector.styles.timeline'
  | 'calendarStyleSelector.styles.dayFocus'
  | 'calendarStyleSelector.styles.compactMonth'
  | 'calendarStyleSelector.styles.threeDayView'
  | 'calendarStyleSelector.styles.familyGrid'
  | 'calendarStyleSelector.styles.familyOrbit'
  | 'calendarStyleSelector.styles.familyPuzzle'
  | 'calendarStyleSelector.styles.familyGarden'
  | 'calendarStyleSelector.styles.yearOverview'
  | 'calendarStyleSelector.styles.cloudFloating'
  | 'calendarStyleSelector.styles.constellationWheel'
  | 'calendarStyleSelector.styles.subwayMap'
  | 'calendarStyleSelector.styles.gardenPlant'
  | 'calendarStyleSelector.styles.puzzlePiece'
  | 'calendarStyleSelector.styles.fishingPond'
  | 'calendarStyleSelector.styles.spaceExploration'
  | 'calendarStyleSelector.styles.treasureMap'
  | 'calendarStyleSelector.styles.heatmap'
  | 'calendarStyleSelector.styles.ganttChart'
  | 'calendarStyleSelector.styles.heartbeat'
  | 'calendarStyleSelector.styles.bubbleChart'
  | 'calendarStyleSelector.styles.seasonalLandscape'
  | 'calendarStyleSelector.styles.bookshelf'
  | 'calendarStyleSelector.styles.musicStaff'
  | 'calendarStyleSelector.styles.kitchenRecipe'
  | 'calendarStyleSelector.styles.runningTrack'
  | 'calendarStyleSelector.styles.moodDiary'
  | 'calendarStyleSelector.styles.fitnessChallenge'
  | 'calendarStyleSelector.styles.cube3d'
  | 'calendarStyleSelector.styles.aiPrediction'
  | 'calendarStyleSelector.styles.arView'
  | 'calendarStyleSelector.styles.seasonalHarmony'
  | 'calendarStyleSelector.styles.familyNotebook'
  | 'calendarStyleSelector.styles.bentoBox'
  | 'calendarStyleSelector.styles.origamiCalendar'
  | 'calendarStyleSelector.styles.ryokanStyle'
  | 'calendarStyleSelector.cancel'
  | 'calendarStyleSelector.changeSuccess'
  | 'calendarStyleSelector.changeSuccessMessage'
  | 'calendarStyleSelector.saveFailed'
  | 'calendarStyleSelector.saveFailedMessage'
  | 'calendarStyleSelector.footerText'
  | 'languageSelection.title'
  | 'languageSelection.languages.zh-CN'
  | 'languageSelection.languages.zh-TW'
  | 'languageSelection.languages.en-US'
  | 'languageSelection.languages.ja-JP'
  | 'tabs.record'
  | 'tabs.explore'
  | 'explore.loading'
  | 'explore.clear'
  | 'smartButton.parseError'
  | 'home.parseError'
  | 'profile.createOrJoinFamilyTitle'
  | 'profile.createOrJoinFamilyMessage'
  | 'profile.cancel'
  | 'profile.createFamily'
  | 'profile.joinFamily'
  | 'profile.title'
  | 'profile.family'
  | 'profile.createOrJoin'
  | 'profile.loading'
  | 'profile.manageFamily'
  | 'profile.familySchedule'
  | 'profile.memberManagement'
  | 'profile.choreAssignment'
  | 'profile.birthdayReminder'
  | 'profile.familyAlbum'
  | 'profile.shoppingList'
  | 'profile.familyBudget'
  | 'profile.emergencyContact'
  | 'profile.settings'
  | 'profile.userAgreement'
  | 'profile.privacyPolicy'
  | 'profile.about'
  | 'profile.metaSpaceView'
  | 'profile.personalSpace'
  | 'profile.familySpace'
  | 'profile.familyAssistant'
  | 'profile.familyActivities'
  | 'profile.familyFinance'
  | 'profile.familyRecipes'
  | 'familyManagement.title'
  | 'familyManagement.members'
  | 'familyManagement.memberCount'
  | 'familyManagement.inviteCode'
  | 'familyManagement.share'
  | 'familyManagement.remove'
  | 'familyManagement.unknownUser'
  | 'familyManagement.owner'
  | 'familyManagement.inviteMember'
  | 'familyManagement.noFamilyFound'
  | 'familyManagement.createFamily'
  | 'familyManagement.dissolveFamily'
  | 'familyManagement.leaveFamily'
  | 'familyManagement.inviteModalTitle'
  | 'familyManagement.shareInviteCode'
  | 'familyManagement.shareInviteMessage'
  | 'familyManagement.shareInviteTitle'
  | 'familyManagement.shareFailed'
  | 'familyManagement.removeMemberTitle'
  | 'familyManagement.removeMemberMessage'
  | 'familyManagement.cancel'
  | 'familyManagement.success'
  | 'familyManagement.memberRemoved'
  | 'familyManagement.removeMemberFailed'
  | 'familyManagement.leaveFamilyTitle'
  | 'familyManagement.leaveFamilyMessage'
  | 'familyManagement.ok'
  | 'familyManagement.familyLeft'
  | 'familyManagement.leaveFamilyFailed'
  | 'familyManagement.dissolveFamilyTitle'
  | 'familyManagement.dissolveFamilyMessage'
  | 'familyManagement.dissolved'
  | 'familyManagement.familyDissolved'
  | 'familyManagement.dissolveFamilyFailed'
  | 'familyManagement.byInviteCode'
  | 'familyManagement.enterInviteCode'
  | 'familyManagement.joinFamily'
  | 'joinFamily.title'
  | 'joinFamily.introTitle'
  | 'joinFamily.introText'
  | 'joinFamily.inviteCode'
  | 'joinFamily.inviteCodePlaceholder'
  | 'joinFamily.helpTitle'
  | 'joinFamily.helpText1'
  | 'joinFamily.helpText2'
  | 'joinFamily.helpText3'
  | 'joinFamily.joinButton'
  | 'joinFamily.joiningButton'
  | 'joinFamily.errorTitle'
  | 'joinFamily.errorCodeRequired'
  | 'joinFamily.successTitle'
  | 'joinFamily.successMessage'
  | 'joinFamily.ok'
  | 'joinFamily.joinFailed'
  | 'joinFamily.alreadyMember'
  | 'joinFamily.invalidCode'
  | 'firstSuggestions.suggestion1'
  | 'firstSuggestions.suggestion2'
  | 'firstSuggestions.suggestion3'
  | 'firstSuggestions.suggestion4'
  | 'firstSuggestions.suggestion5'
  | 'firstSuggestions.suggestion6'
  | 'firstSuggestions.suggestion7'
  | 'common.createNewSpace'
  | 'common.joinSpace'
  | 'common.cancel'
  | 'drawer.viewProfile'
  | 'drawer.newSpace'
  | 'drawer.metaSpace'
  | 'drawer.metaSpaceDescription'
  | 'drawer.allSpaces'
  | 'drawer.membersCount'
  | 'drawer.totalMembersCount'
  | 'explore.loading'
  | 'explore.clear'
  | 'explore.welcomeToChat'
  | 'space.personalSpace'
  | 'space.personalSpaceDescription'
  | 'space.personalSpaceNotice'
  | 'space.personalSpaceCannotDissolve'
  | 'space.metaSpaceIntegrationView'
  | 'space.cannotShareToMetaSpace'
  | 'featureSettings.features.familySchedule.name'
  | 'featureSettings.features.familySchedule.description'
  | 'featureSettings.features.familyAssistant.name'
  | 'featureSettings.features.familyAssistant.description'
  | 'featureSettings.features.choreAssignment.name'
  | 'featureSettings.features.choreAssignment.description'
  | 'featureSettings.features.familyActivities.name'
  | 'featureSettings.features.familyActivities.description'
  | 'featureSettings.features.familyAlbum.name'
  | 'featureSettings.features.familyAlbum.description'
  | 'featureSettings.features.shoppingList.name'
  | 'featureSettings.features.shoppingList.description'
  | 'featureSettings.features.familyFinance.name'
  | 'featureSettings.features.familyFinance.description'
  | 'featureSettings.features.familyRecipes.name'
  | 'featureSettings.features.familyRecipes.description'
  | 'featureSettings.labels.chooseStyle'
  | 'featureSettings.labels.inputPlaceholder'
  | 'featureSettings.labels.gridMonthView'
  | 'featureSettings.labels.dailyRecords'
  | 'featureSettings.labels.weeklyOverview'
  | 'featureSettings.labels.nutritionChart'
  | 'featureSettings.labels.taskBoard'
  | 'featureSettings.alerts.featureEnabled'
  | 'featureSettings.alerts.featureEnabledMessage'
  | 'featureSettings.alerts.ok'
  | 'featureSettings.alerts.cancel'
  | 'featureSettings.alerts.selectMealViewStyle'
  | 'featureSettings.alerts.selectMealViewMessage'
  | 'featureSettings.title'
  | 'featureSettings.enableFeature'
  | 'featureSettings.settingsSection'
  | 'featureSettings.infoSection'
  | 'featureSettings.infoText'
  | 'featureSettings.errors.featureNotFound'
  | 'featureSettings.errors.parameterNotProvided'
  | 'featureSettings.errors.backToProfile'
  | 'featureSettings.settings.syncWithSystem'
  | 'featureSettings.settings.enableReminders'
  | 'featureSettings.settings.reminderMinutes'
  | 'featureSettings.settings.voiceEnabled'
  | 'featureSettings.settings.autoRespond'
  | 'featureSettings.settings.language'
  | 'featureSettings.settings.autoBackup'
  | 'featureSettings.settings.enableSharing'
  | 'featureSettings.settings.qualityLevel'
  | 'featureSettings.settings.syncAcrossDevices'
  | 'featureSettings.settings.enableCategories'
  | 'featureSettings.settings.budgetTracking'
  | 'featureSettings.settings.enableBudgetAlerts'
  | 'featureSettings.settings.monthlyBudget'
  | 'featureSettings.settings.trackCategories'
  | 'featureSettings.settings.enableNutritionInfo'
  | 'featureSettings.settings.suggestMeals'
  | 'featureSettings.settings.shoppingIntegration'
  | 'featureSettings.settings.enableRewards'
  | 'featureSettings.settings.autoRotate'
  | 'featureSettings.settings.weeklyReset'
  | 'featureSettings.settings.trackHealth'
  | 'featureSettings.settings.medicineReminders'
  | 'featureSettings.settings.healthReports'
  | 'editProfile.title'
  | 'editProfile.save'
  | 'editProfile.saving'
  | 'editProfile.nickname'
  | 'editProfile.nicknamePlaceholder'
  | 'editProfile.phone'
  | 'editProfile.phonePlaceholder'
  | 'editProfile.gender'
  | 'editProfile.birthday'
  | 'editProfile.interests'
  | 'editProfile.interestsPlaceholder'
  | 'editProfile.clickToChangeAvatar'
  | 'editProfile.uploading'
  | 'editProfile.error'
  | 'editProfile.notLoggedIn'
  | 'editProfile.nicknameRequired'
  | 'editProfile.saveFailed'
  | 'editProfile.success'
  | 'editProfile.profileUpdated'
  | 'editProfile.avatarUpdated'
  | 'editProfile.avatarUpdateFailed'
  | 'editProfile.avatarDeleted'
  | 'editProfile.deleteAvatarFailed'
  | 'editProfile.takePhotoFailed'
  | 'editProfile.pickPhotoFailed'
  | 'editProfile.ok'
  | 'editProfile.cancel'
  | 'editProfile.done'
  | 'editProfile.selectAvatar'
  | 'editProfile.selectAvatarSource'
  | 'editProfile.takePhoto'
  | 'editProfile.pickFromLibrary'
  | 'editProfile.deleteAvatar'
  | 'editProfile.confirmDelete'
  | 'editProfile.confirmDeleteAvatar'
  | 'editProfile.delete'
  | 'editProfile.selectGender'
  | 'editProfile.selectBirthday'
  | 'editProfile.pleaseSelect'
  | 'editProfile.pleasSelectBirthday'
  | 'editProfile.genders.male'
  | 'editProfile.genders.female'
  | 'editProfile.genders.other'
  | 'editProfile.genders.preferNotToSay'
  | 'editProfile.datePicker.year'
  | 'editProfile.datePicker.month'
  | 'editProfile.datePicker.day'
  | 'editProfile.user'
  | 'familyManagement.title'
  | 'familyManagement.currentFamily'
  | 'familyManagement.familyMembers'
  | 'familyManagement.quickActions'
  | 'familyManagement.dangerousActions'
  | 'familyManagement.members'
  | 'familyManagement.memberCount'
  | 'familyManagement.youAreOwner'
  | 'familyManagement.youAreMember'
  | 'familyManagement.switch'
  | 'familyManagement.edit'
  | 'familyManagement.unknownUser'
  | 'familyManagement.owner'
  | 'familyManagement.member'
  | 'familyManagement.createNewFamily'
  | 'familyManagement.joinFamily'
  | 'familyManagement.emailInvite'
  | 'familyManagement.shareInvite'
  | 'familyManagement.copyInviteCode'
  | 'familyManagement.leaveFamily'
  | 'familyManagement.dissolveFamily'
  | 'familyManagement.selectFamily'
  | 'familyManagement.memberCountShort'
  | 'familyManagement.hint'
  | 'familyManagement.enterFamilyName'
  | 'familyManagement.createSuccess'
  | 'familyManagement.familyCreatedSuccess'
  | 'familyManagement.createFailed'
  | 'familyManagement.enterInviteCode'
  | 'familyManagement.joinSuccess'
  | 'familyManagement.joinedFamilySuccess'
  | 'familyManagement.joinFailed'
  | 'familyManagement.enterEmail'
  | 'familyManagement.inviteSuccess'
  | 'familyManagement.inviteEmailSent'
  | 'familyManagement.inviteFailed'
  | 'familyManagement.noInviteCode'
  | 'familyManagement.shareMessage'
  | 'familyManagement.familyInvite'
  | 'familyManagement.shareFailed'
  | 'familyManagement.copySuccess'
  | 'familyManagement.inviteCodeCopied'
  | 'familyManagement.copyFailed'
  | 'familyManagement.confirmRemove'
  | 'familyManagement.confirmRemoveMember'
  | 'familyManagement.cancel'
  | 'familyManagement.confirm'
  | 'familyManagement.removeSuccess'
  | 'familyManagement.memberRemoved'
  | 'familyManagement.confirmLeave'
  | 'familyManagement.confirmLeaveFamily'
  | 'familyManagement.leaveSuccess'
  | 'familyManagement.leftFamily'
  | 'familyManagement.confirmDissolve'
  | 'familyManagement.confirmDissolveFamilyMessage'
  | 'familyManagement.dissolve'
  | 'familyManagement.dissolveSuccess'
  | 'familyManagement.familyDissolved'
  | 'familyManagement.switchSuccess'
  | 'familyManagement.switchedToNewFamily'
  | 'familyManagement.switchFailed'
  | 'familyManagement.switchError'
  | 'familyManagement.validFamilyNameRequired'
  | 'familyManagement.updateSuccess'
  | 'familyManagement.familyNameUpdated'
  | 'familyManagement.updateFailed'
  | 'familyManagement.createFamilyModal'
  | 'familyManagement.familyName'
  | 'familyManagement.familyDescription'
  | 'familyManagement.create'
  | 'familyManagement.joinFamilyModal'
  | 'familyManagement.inviteCodePlaceholder'
  | 'familyManagement.join'
  | 'familyManagement.emailInviteModal'
  | 'familyManagement.emailPlaceholder'
  | 'familyManagement.invite'
  | 'familyManagement.editFamilyNameModal'
  | 'familyManagement.newFamilyNamePlaceholder'
  | 'familyManagement.save'
  | 'space.personalSpaceCannotDissolve'
  | 'space.personalSpaceNotice'
  | 'space.metaSpaceIntegrationView'
  | 'changePassword.title'
  | 'changePassword.description'
  | 'changePassword.newPassword'
  | 'changePassword.confirmNewPassword'
  | 'changePassword.newPasswordPlaceholder'
  | 'changePassword.confirmPasswordPlaceholder'
  | 'changePassword.passwordHint'
  | 'changePassword.updatePassword'
  | 'changePassword.updating'
  | 'changePassword.error'
  | 'changePassword.enterNewPassword'
  | 'changePassword.confirmNewPasswordRequired'
  | 'changePassword.passwordMismatch'
  | 'changePassword.weakPassword'
  | 'changePassword.minLength'
  | 'changePassword.requireLowercase'
  | 'changePassword.requireNumber'
  | 'changePassword.updateFailed'
  | 'changePassword.authError'
  | 'changePassword.unknownError'
  | 'changePassword.updateSuccess'
  | 'changePassword.successMessage'
  | 'changePassword.ok'
  | 'notifications.title'
  | 'notifications.unreadNotifications'
  | 'notifications.readNotifications'
  | 'notifications.markAllAsRead'
  | 'notifications.markAllAsReadConfirm'
  | 'notifications.markAllAsReadMessage'
  | 'notifications.cancel'
  | 'notifications.confirm'
  | 'notifications.justNow'
  | 'notifications.minutesAgo'
  | 'notifications.hoursAgo'
  | 'notifications.daysAgo'
  | 'notifications.system'
  | 'notifications.noNotifications'
  | 'notifications.noNotificationsMessage'
  | 'notifications.loading'
  | 'notifications.loadingMore'
  | 'notifications.loginRequired'
  | 'notifications.goToLogin'
  | 'notifications.familyRequired'
  | 'notifications.eventCreatedTitle'
  | 'notifications.eventCreatedMessage'
  | 'notifications.eventUpdatedTitle'
  | 'notifications.eventUpdatedMessage'
  | 'notifications.eventDeletedTitle'
  | 'notifications.eventDeletedMessage'
  | 'notificationSettings.title'
  | 'notificationSettings.pushNotifications'
  | 'notificationSettings.enablePushNotifications'
  | 'notificationSettings.notificationTypes'
  | 'notificationSettings.eventCreatedTitle'
  | 'notificationSettings.eventCreatedDescription'
  | 'notificationSettings.eventUpdatedTitle'
  | 'notificationSettings.eventUpdatedDescription'
  | 'notificationSettings.eventDeletedTitle'
  | 'notificationSettings.eventDeletedDescription'
  | 'notificationSettings.eventReminderTitle'
  | 'notificationSettings.eventReminderDescription'
  | 'notificationSettings.familyInviteTitle'
  | 'notificationSettings.familyInviteDescription'
  | 'notificationSettings.joinFamilyPrompt'
  | 'notificationSettings.save'
  | 'notificationSettings.pushNotificationsDescription'
  | 'notificationSettings.quietHours'
  | 'notificationSettings.enableQuietHours'
  | 'notificationSettings.quietHoursDescription'
  | 'notificationSettings.quietHoursStart'
  | 'notificationSettings.quietHoursEnd'
  | 'notificationSettings.note1'
  | 'notificationSettings.note2'
  | 'notificationSettings.note3'
  // iOS Permission Usage Descriptions
  | 'NSCameraUsageDescription'
  | 'NSPhotoLibraryUsageDescription'
  | 'NSPhotoLibraryAddUsageDescription'
  | 'NSMicrophoneUsageDescription'
  | 'NSLocationWhenInUseUsageDescription'
  | 'NSCalendarsUsageDescription'
  | 'NSRemindersUsageDescription'
  | 'NSUserTrackingUsageDescription'
  ;

export const t = (key: string, options?: any) => i18n.t(key, options);

export const setLocale = (locale: string) => {
  i18n.locale = locale;
};

export const getCurrentLocale = () => {
  const locale = i18n.locale;
  
  // 轉換為標準的 locale 格式用於 Date 格式化
  if (locale === 'zh-CN') return 'zh-CN';
  if (locale === 'zh-TW') return 'zh-TW';
  if (locale === 'ja') return 'ja-JP';
  return 'en-US';
};

export { getDeviceLocale };

